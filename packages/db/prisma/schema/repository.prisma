model Repository {
  id            String   @id @default(cuid())
  name          String
  owner         String
  url           String   @unique
  description   String?
  stars         Int      @default(0)
  language      String?
  chunksIndexed Int      @default(0)
  status        String   @default("indexed")
  indexedAt     DateTime @default(now())
  createdAt     DateTime @default(now())
  userId        String
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  onboardingDocs       OnboardingDoc[]
  markdownTranslations MarkdownTranslation[]

  @@index([userId])
}

model OnboardingDoc {
  id           String     @id @default(cuid())
  content      String
  locale       String     @default("en")
  repositoryId String
  repository   Repository @relation(fields: [repositoryId], references: [id], onDelete: Cascade)
  createdAt    DateTime   @default(now())

  @@index([repositoryId])
}

model MarkdownTranslation {
  id           String     @id @default(cuid())
  locale       String
  files        Json
  repositoryId String
  repository   Repository @relation(fields: [repositoryId], references: [id], onDelete: Cascade)
  createdAt    DateTime   @default(now())

  @@index([repositoryId])
}
